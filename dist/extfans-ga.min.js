!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).ExtfansGa=n()}(this,function(){"use strict";var e=(new Date).valueOf();var n={get:function(e){return localStorage.getItem(e)},set:function(e,n){localStorage.setItem(e,n)}};var t=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},a=function(){function a(e){t(this,a);var o,r=this.baseInfo={v:1,tid:e.trackingId,uid:e.userId},i=n.get("ga:clientId");i||(o=Date.now()+performance.now(),i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"===e?n:3&n|8).toString(16)}),n.set("ga:clientId",i)),r.cid=i,this.systemInfo={sr:screen.width+"x"+window.screen.height,sd:screen.colorDepth+"-bits",ul:navigator.language},this.extraInfo={dl:location.href.split("#")[0]}}return o(a,[{key:"event",value:function(e){return this.send("event",{ec:e.category,ea:e.action,el:e.label,ev:e.value,ni:!0===e.nonInteraction})}},{key:"pageview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;return n.send("pageview",{dl:e.location,dh:e.host,dp:e.page,dt:e.title||document.title})}},{key:"send",value:function(n,t){var o=r({_t:e++,t:n},this.baseInfo,this.systemInfo,t),a=this.extraInfo;for(var i in a)null==o[i]&&(o[i]=a[i]);var c=new XMLHttpRequest,l="https://www.google-analytics.com/collect?"+function(e){var n=[];for(var t in e){var o=e[t];null!=o&&!1!==o&&(!0===o&&(o=1),n.push(encodeURIComponent(t)+"="+encodeURIComponent(o)))}return n.join("&")}(o);return c.open("GET",l,!0),c.send(null),l}}]),a}();return a.version="1.0.2",a});
