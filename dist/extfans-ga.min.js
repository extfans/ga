!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ExtfansGa=t()}(this,function(){"use strict";var e=(new Date).valueOf();function t(){return e++}var n={get:function(e){return localStorage.getItem(e)},set:function(e,t){localStorage.setItem(e,t)}};function o(e){var t=[];for(var n in e){var o=e[n];null!=o&&!1!==o&&(!0===o&&(o=1),t.push(encodeURIComponent(n)+"="+encodeURIComponent(o)))}return t.join("&")}var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(t){r(this,e);var o,a=this.baseInfo={v:1,tid:t.trackingId,uid:t.userId},i=n.get("ga:clientId");i||(o=Date.now()+performance.now(),i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"===e?t:3&t|8).toString(16)}),n.set("ga:clientId",i)),a.cid=i,this.systemInfo={sr:screen.width+"x"+window.screen.height,sd:screen.colorDepth+"-bits",ul:navigator.language},this.extraInfo={dl:location.href.split("#")[0]}}return a(e,[{key:"getEventUrl",value:function(e){return this.getSendUrl("event",{ec:e.category,ea:e.action,el:e.label,ev:e.value,ni:!0===e.nonInteraction})}},{key:"event",value:function(e){return this.send("event",{ec:e.category,ea:e.action,el:e.label,ev:e.value,ni:!0===e.nonInteraction})}},{key:"getPageviewUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return t.getSendUrl("pageview",{dl:e.location,dh:e.host,dp:e.page,dt:e.title||document.title})}},{key:"pageview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return t.send("pageview",{dl:e.location,dh:e.host,dp:e.page,dt:e.title||document.title})}},{key:"send",value:function(e,n){var r=i({_t:t(),t:e},this.baseInfo,this.systemInfo,n),a=this.extraInfo;for(var l in a)null==r[l]&&(r[l]=a[l]);var c=new XMLHttpRequest,u="https://www.google-analytics.com/collect?"+o(r);return c.open("GET",u,!0),c.send(null),u}},{key:"getSendUrl",value:function(e,n){var r=i({_t:t(),t:e},this.baseInfo,this.systemInfo,n),a=this.extraInfo;for(var l in a)null==r[l]&&(r[l]=a[l]);return"https://www.google-analytics.com/collect?"+o(r)}}]),e}();return l.version="1.0.2",l});
